/*! For license information please see 1740603a.fb672e74.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{132:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return c})),r.d(t,"metadata",(function(){return u})),r.d(t,"rightToc",(function(){return s})),r.d(t,"default",(function(){return b}));var n=r(1),a=r(9),o=(r(0),r(153)),i=r(155),l=r(156),c={id:"onboarding-dev-workflow",title:"Development Workflow"},u={id:"onboarding-dev-workflow",title:"Development Workflow",description:"## Introduction",source:"@site/docs/onboarding-dev-workflow.md",permalink:"/docs/onboarding-dev-workflow",sidebar:"someSidebar",previous:{title:"Contributing",permalink:"/docs/getting-started-contributing"},next:{title:"Text Editor",permalink:"/docs/onboarding-editor"}},s=[{value:"Introduction",id:"introduction",children:[]},{value:"Concrete Steps",id:"concrete-steps",children:[{value:"Step 0: setup a local project",id:"step-0-setup-a-local-project",children:[]},{value:"Step 1: plan",id:"step-1-plan",children:[]},{value:"Step 2: sync with <code>master</code> branch",id:"step-2-sync-with-master-branch",children:[]},{value:"Step 3: create a local branch",id:"step-3-create-a-local-branch",children:[]},{value:"Step 4: make your changes",id:"step-4-make-your-changes",children:[]},{value:"Step 5: test your changes",id:"step-5-test-your-changes",children:[]},{value:"Step 6: checking your code quality",id:"step-6-checking-your-code-quality",children:[]},{value:"Step 7: push your changes to remote",id:"step-7-push-your-changes-to-remote",children:[]},{value:"Step 8: create a pull request",id:"step-8-create-a-pull-request",children:[]},{value:"Step 9: waiting for review",id:"step-9-waiting-for-review",children:[]},{value:"Step 10: merge into <code>master</code>",id:"step-10-merge-into-master",children:[]}]}],p={rightToc:s};function b(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},p,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"introduction"},"Introduction"),Object(o.b)("p",null,"If you have worked with Git in other CS classes, you might be familiar with pushing to ",Object(o.b)("inlineCode",{parentName:"p"},"master"),"\ndirectly. At Cornell DTI, pushing to ",Object(o.b)("inlineCode",{parentName:"p"},"master")," is prohibited and the policy is strictly enforced by\nGitHub branch protection with no exception."),Object(o.b)("p",null,"If you are not familiar with the pull request workflow, you should read the following steps and\nfollow them for each of your task."),Object(o.b)("h2",{id:"concrete-steps"},"Concrete Steps"),Object(o.b)("h3",{id:"step-0-setup-a-local-project"},"Step 0: setup a local project"),Object(o.b)("p",null,"See ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"./onboarding-git#setup-your-project"}),"Setup your project")," in the Git tutorial."),Object(o.b)("p",null,"Skip if you alreday have your repository setup."),Object(o.b)("h3",{id:"step-1-plan"},"Step 1: plan"),Object(o.b)("p",null,'For every pull request, your "significant lines" usually should not exceed 1000.'),Object(o.b)("p",null,"Significant lines are defined by all your changes minus"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Lock files like ",Object(o.b)("inlineCode",{parentName:"li"},"package-lock.json"),", ",Object(o.b)("inlineCode",{parentName:"li"},"yarn.lock"),", ",Object(o.b)("inlineCode",{parentName:"li"},"Podspec.lock"),", etc."),Object(o.b)("li",{parentName:"ul"},"moved lines")),Object(o.b)("p",null,"To ensure you do not exceed the limit, you need to plan before you write any code."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Think about what's the smallest non-negative change that leads one step closer to your final task.",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Non-negative means that your change can be merged into master without breaking anything."),Object(o.b)("li",{parentName:"ul"},"Smallest means removing unnecessary changes: e.g. do not fix two unrelated bugs in one pull\nrequest. Create two instead. Don't be too ambitious to do everything at once."))),Object(o.b)("li",{parentName:"ul"},"You might find yourself in this situation.",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"I need to do feature A."),Object(o.b)("li",{parentName:"ul"},"After some coding, I found that feature A depends on refactor B."),Object(o.b)("li",{parentName:"ul"},"After some refactoring, I found that refactor B depends on bug fix C."),Object(o.b)("li",{parentName:"ul"},"..."),Object(o.b)("li",{parentName:"ul"},"After all steps are done, diff is already 4000+ line long."),Object(o.b)("li",{parentName:"ul"},"Plan ahead so that you create a PR for bug fix C first, then refactor B, and finally feature A."))),Object(o.b)("li",{parentName:"ul"},"Ask for reviews early and ask for reviews often."),Object(o.b)("li",{parentName:"ul"},"Avoid unnecessary changes",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Avoid rewriting other's code to match your style.\nIf it is really problematic, create an issue and do that in a separate PR."))),Object(o.b)("li",{parentName:"ul"},"Gate any WIP features",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Sometimes it's hard not to break master while features are being incrementally developed."),Object(o.b)("li",{parentName:"ul"},"e.g. Samwise's repeating task requires refactoring a lot of code. Each PR only refactors one\npart of the code"),Object(o.b)("li",{parentName:"ul"},"Gate the incomplete feature behind a flag. For example, this new UI will not be shown unless\ncertain environment variable/localStorage value is set to TRUE.")))),Object(o.b)("h3",{id:"step-2-sync-with-master-branch"},"Step 2: sync with ",Object(o.b)("inlineCode",{parentName:"h3"},"master")," branch"),Object(o.b)("p",null,"You should keep your local repository to be up-to-date with latest ",Object(o.b)("inlineCode",{parentName:"p"},"master"),"."),Object(o.b)("p",null,"See ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"%5B./onboarding-git#pull-latest-changes-from-remote"}),"Pull latest changes from remote")," in the Git\ntutorial."),Object(o.b)("h3",{id:"step-3-create-a-local-branch"},"Step 3: create a local branch"),Object(o.b)("p",null,"Always start a new branch when you need to work on something new."),Object(o.b)("p",null,"See ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"./onboarding-git#create-a-new-branch"}),"Create a new branch")," in the Git tutorial."),Object(o.b)("h3",{id:"step-4-make-your-changes"},"Step 4: make your changes"),Object(o.b)("p",null,"This is the coding part. You should write good code. Bad code will not pass code review."),Object(o.b)("h3",{id:"step-5-test-your-changes"},"Step 5: test your changes"),Object(o.b)("p",null,"You should find ways to prove that your changes work.\nYou will need to document this in your pull request comment later."),Object(o.b)("h3",{id:"step-6-checking-your-code-quality"},"Step 6: checking your code quality"),Object(o.b)("p",null,"Your repository should have linter or/and formatter already setup."),Object(o.b)("p",null,"If your repository has formatter setup, run the formatter first to ensure your code matches the\nteam's style."),Object(o.b)("p",null,"Then you should run the linter to check for some stupid mistakes."),Object(o.b)("p",null,"Finally, if you project uses a statically-typed language, run the compiler to find if there is any\ntype errors. You should try to fix these errors instead of suppress them."),Object(o.b)("h3",{id:"step-7-push-your-changes-to-remote"},"Step 7: push your changes to remote"),Object(o.b)("p",null,"See ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"%5B./onboarding-git#push-to-remote"}),"Push to remote")," in the Git tutorial."),Object(o.b)("h3",{id:"step-8-create-a-pull-request"},"Step 8: create a pull request"),Object(o.b)(i.a,{defaultValue:"desktop",values:[{label:"GitHub Desktop",value:"desktop"},{label:"GitHub Web",value:"web"}],mdxType:"Tabs"},Object(o.b)(l.a,{value:"desktop",mdxType:"TabItem"},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"Command/Ctrl R")," in GitHub Desktop or click ",Object(o.b)("inlineCode",{parentName:"p"},"Branch -> Create Pull Request"),"."),Object(o.b)("p",null,Object(o.b)("img",Object(n.a)({parentName:"p"},{src:"/docs-img/onboarding-dev-workflow/github-desktop-create-pr.png",alt:"GitHub Desktop Create PR"})))),Object(o.b)(l.a,{value:"web",mdxType:"TabItem"},Object(o.b)("p",null,"Go to the ",Object(o.b)("inlineCode",{parentName:"p"},"Pull requests")," tab. Click the green ",Object(o.b)("inlineCode",{parentName:"p"},"Compare & pull request")," button."),Object(o.b)("p",null,Object(o.b)("img",Object(n.a)({parentName:"p"},{src:"/docs-img/onboarding-dev-workflow/github-web-create-pr.png",alt:"GitHub Web Create PR"}))))),Object(o.b)("p",null,"You should follow the pull request template in your repository. They will be automatically\npre-filled when you are creating a pull request. You should fill in the required part."),Object(o.b)("p",null,"You should at least write a summary of what you did in this pull request and the test plan."),Object(o.b)("h3",{id:"step-9-waiting-for-review"},"Step 9: waiting for review"),Object(o.b)("p",null,"Ask your peers to review your code. They might request changes. You should make changes to address\nyour concern, or defend your implementation approach and ask for their review again."),Object(o.b)("p",null,"Some bots may also participate in the review process. For example, ",Object(o.b)("inlineCode",{parentName:"p"},"dti-github-bot")," will check if\nyour pull request is too big. You will also see some CI status in the bottom of the pull request\npage. Your pull request ",Object(o.b)("strong",{parentName:"p"},"must")," pass all required CI checks."),Object(o.b)("p",null,"The progress can be illustrated by the graph below:"),Object(o.b)("p",null,Object(o.b)("img",Object(n.a)({parentName:"p"},{src:"/docs-img/onboarding-dev-workflow/required-checks.png",alt:"Required Checks"}))),Object(o.b)("p",null,"Here are some example of bots participating in review:"),Object(o.b)("p",null,Object(o.b)("img",Object(n.a)({parentName:"p"},{src:"/docs-img/onboarding-dev-workflow/linter-error-annotation.png",alt:"Error Annotation"})),"\n",Object(o.b)("img",Object(n.a)({parentName:"p"},{src:"/docs-img/onboarding-dev-workflow/dti-github-bot-pr-too-big.png",alt:"PR Too Big"}))),Object(o.b)("h3",{id:"step-10-merge-into-master"},"Step 10: merge into ",Object(o.b)("inlineCode",{parentName:"h3"},"master")),Object(o.b)("p",null,"\ud83c\udf89 Your changes are merged. The continuous deployment scripts will automatically deploy your\nchanges to staging."),Object(o.b)("p",null,"You should ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"./onboarding-git#delete-a-branch"}),"delete your local branch")," immediately, and start\nyour new work on a new branch."))}b.isMDXComponent=!0},152:function(e,t,r){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var i=a.apply(null,n);i&&e.push(i)}else if("object"===o)for(var l in n)r.call(n,l)&&n[l]&&e.push(l)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},153:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return h}));var n=r(0),a=r.n(n);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=a.a.createContext({}),s=function(e){var t=a.a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):l({},t,{},e)),r},p=function(e){var t=s(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=s(r),d=n,h=p["".concat(i,".").concat(d)]||p[d]||b[d]||o;return r?a.a.createElement(h,l({ref:t},u,{components:r})):a.a.createElement(h,l({ref:t},u))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var u=2;u<o;u++)i[u]=r[u];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},155:function(e,t,r){"use strict";r(23),r(18),r(19);var n=r(0),a=r.n(n),o=r(152),i=r.n(o),l=r(127),c=r.n(l),u=37,s=39;t.a=function(e){var t=e.block,r=e.children,o=e.defaultValue,l=e.values,p=Object(n.useState)(o),b=p[0],d=p[1],h=[];return a.a.createElement("div",null,a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:i()("tabs",{"tabs--block":t})},l.map((function(e){var t=e.value,r=e.label;return a.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":b===t,className:i()("tab-item",c.a.tabItem,{"tab-item--active":b===t}),key:t,ref:function(e){return h.push(e)},onKeyDown:function(e){return function(e,t,r){switch(r.keyCode){case s:!function(e,t){var r=e.indexOf(t)+1;e[r]?e[r].focus():e[0].focus()}(e,t);break;case u:!function(e,t){var r=e.indexOf(t)-1;e[r]?e[r].focus():e[e.length-1].focus()}(e,t)}}(h,e.target,e)},onFocus:function(){return d(t)},onClick:function(){return d(t)}},r)}))),a.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},n.Children.toArray(r).filter((function(e){return e.props.value===b}))[0]))}},156:function(e,t,r){"use strict";var n=r(0),a=r.n(n);t.a=function(e){return a.a.createElement("div",null,e.children)}}}]);