(self.webpackChunkdev_cornelldti_org=self.webpackChunkdev_cornelldti_org||[]).push([[670],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return h}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),h=o,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||i;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},314:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return r},metadata:function(){return s},toc:function(){return l},default:function(){return c}});var a=n(2122),o=n(9756),i=(n(7294),n(3905)),r={id:"slab-javascript-unit-testing",title:"JavaScript Unit Testing"},s={unversionedId:"slab-javascript-unit-testing",id:"slab-javascript-unit-testing",isDocsHomePage:!1,title:"JavaScript Unit Testing",description:"Full disclosure: this document is based on the course &quot;Learn JavaScript Unit Testing&quot; at Codecademy.com",source:"@site/docs/slab-javascript-unit-testing.md",sourceDirName:".",slug:"/slab-javascript-unit-testing",permalink:"/docs/slab-javascript-unit-testing",version:"current",frontMatter:{id:"slab-javascript-unit-testing",title:"JavaScript Unit Testing"},sidebar:"someSidebar",previous:{title:"Slab Archive Index",permalink:"/docs/slab-index"},next:{title:"How to Break Down Large Tasks",permalink:"/docs/slab-large-tasks"}},l=[{value:"Why Test?",id:"why-test",children:[]},{value:"How to Make an Effective Test Suite",id:"how-to-make-an-effective-test-suite",children:[]},{value:"How to Test in JavaScript (spoiler: use Mocha)",id:"how-to-test-in-javascript-spoiler-use-mocha",children:[{value:"How to install Mocha:",id:"how-to-install-mocha",children:[]},{value:"How to run Mocha:",id:"how-to-run-mocha",children:[]},{value:"<code>describe</code> and <code>it</code> blocks in Mocha",id:"describe-and-it-blocks-in-mocha",children:[]},{value:"<code>assert</code> in Mocha",id:"assert-in-mocha",children:[]},{value:"Proper Setup of Tests in Mocha",id:"proper-setup-of-tests-in-mocha",children:[]}]},{value:"How to Make an Effective Test Suite",id:"how-to-make-an-effective-test-suite-1",children:[]},{value:"How to Test in JavaScript (spoiler: use Mocha)",id:"how-to-test-in-javascript-spoiler-use-mocha-1",children:[{value:"How to install Mocha:",id:"how-to-install-mocha-1",children:[]},{value:"How to run Mocha:",id:"how-to-run-mocha-1",children:[]},{value:"<code>describe</code> and <code>it</code> blocks in Mocha",id:"describe-and-it-blocks-in-mocha-1",children:[]},{value:"<code>assert</code> in Mocha",id:"assert-in-mocha-1",children:[]},{value:"Proper Setup of Tests in Mocha",id:"proper-setup-of-tests-in-mocha-1",children:[]}]}],p={toc:l};function c(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Full disclosure: this document is based on the course ",'"'),(0,i.kt)("a",{parentName:"p",href:"https://www.codecademy.com/learn/learn-javascript-unit-testing"},(0,i.kt)("em",{parentName:"a"},"Learn JavaScript Unit Testing")),(0,i.kt)("em",{parentName:"p"},'"'," at")," ",(0,i.kt)("a",{parentName:"p",href:"https://codecademy.com"},(0,i.kt)("em",{parentName:"a"},"Codecademy.com"))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"why-test"},"Why Test?"),(0,i.kt)("p",null,"When writing your app using JavaScript, it is often easier and more convenient to assume that the lines of code you just wrote are correct. After all, you wrote them. Unfortunately, we are human and we err. Let's catch these faux paus before they affect your teammates' work. Enter, unit tests."),(0,i.kt)("p",null,"For the uninitiated, unit tests (and automated tests in general) are better than manual testing because it is:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"faster"),(0,i.kt)("li",{parentName:"ul"},"more reliable"),(0,i.kt)("li",{parentName:"ul"},"maintainable")),(0,i.kt)("p",null,"A typical workflow should consist of something like the following:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Write code ",(0,i.kt)("strong",{parentName:"li"},"and")," corresponding tests"),(0,i.kt)("li",{parentName:"ol"},"Enter a command into a terminal to run tests"),(0,i.kt)("li",{parentName:"ol"},"If all the tests pass, Congratulations! Otherwise, go back to step 1 and review your code")),(0,i.kt)("p",null,"Tests as documentation provide what many other forms cannot: both human-readable text to describe the application and machine-executable code to confirm the app works as described."),(0,i.kt)("p",null,"Quick test, see if you can understand what is going on with the following code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"it('accepts the customer name', () => {\n  const name = 'Hungry Person';\n\n  browser.url('/');\n  browser.setValue('#name', name);\n  browser.click('#submit-order');\n  browser.url('/');\n\n  assert.include(browser.getText('#deliver-to'), name);\n});\n")),(0,i.kt)("p",null,"Answer: ",(0,i.kt)("inlineCode",{parentName:"p"},"it accepts the customer name")),(0,i.kt)("p",null,"If you're still reading, great. You know and understand the importance of testing ",(0,i.kt)("em",{parentName:"p"},"while developing"),"."),(0,i.kt)("p",null,"Your test code should live in close proximity to your development code, and it should be easy to recognize which tests correspond to what development code. i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"index.js")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"index-test.js"),"."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"how-to-make-an-effective-test-suite"},"How to Make an Effective Test Suite"),(0,i.kt)("p",null,"Any change to your test suite should increase its value in at least one of these characteristics"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Fast")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Complete")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Reliable")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Isolated")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Maintainable")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Expressive (i.e. easy to read)"))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"how-to-test-in-javascript-spoiler-use-mocha"},"How to Test in JavaScript (spoiler: use Mocha)"),(0,i.kt)("p",null,"Required technologies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"JavaScript")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Node.js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Mocha")," test framework")),(0,i.kt)("h3",{id:"how-to-install-mocha"},"How to install Mocha:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ npm install mocha -D\n")),(0,i.kt)("h3",{id:"how-to-run-mocha"},"How to run Mocha:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"you can call it directly from ",(0,i.kt)("strong",{parentName:"li"},"node_modules"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ ./node_modules/mocha/bin/mocha\n")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"add a script to ",(0,i.kt)("strong",{parentName:"li"},"package.json"),". In the ",(0,i.kt)("inlineCode",{parentName:"li"},"scripts")," object, set the value of ",(0,i.kt)("inlineCode",{parentName:"li"},'"test"')," to ",(0,i.kt)("inlineCode",{parentName:"li"},"mocha"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"scripts": {\n  "test": "mocha"\n}\n')),(0,i.kt)("p",null,"Now you can call Mocha with the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"npm test\n")),(0,i.kt)("h3",{id:"describe-and-it-blocks-in-mocha"},(0,i.kt)("inlineCode",{parentName:"h3"},"describe")," and ",(0,i.kt)("inlineCode",{parentName:"h3"},"it")," blocks in Mocha"),(0,i.kt)("p",null,"In Mocha, tests are grouped using the ",(0,i.kt)("inlineCode",{parentName:"p"},"describe")," function and define tests using the ",(0,i.kt)("inlineCode",{parentName:"p"},"it")," function. Both functions accept two parameters: a descriptive string and a callback function."),(0,i.kt)("p",null,"Convention is the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"nest ",(0,i.kt)("inlineCode",{parentName:"li"},"describe")," blocks to resemble the structure of your implementation code and write individual tests in ",(0,i.kt)("inlineCode",{parentName:"li"},"it")," blocks")),(0,i.kt)("p",null,"For example, this is how you would test a ",(0,i.kt)("inlineCode",{parentName:"p"},"Math.max()")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"describe('Math', () => {\n  describe('.max', () => {\n    it('returns the argument with the highest value', () => {\n      // Your test goes here\n    });\n    it('returns -Infinity when no arguments are provided', () => {\n      // Your test goes here\n    });\n  });\n});\n")),(0,i.kt)("h3",{id:"assert-in-mocha"},(0,i.kt)("inlineCode",{parentName:"h3"},"assert")," in Mocha"),(0,i.kt)("p",null,"To write the actual tests, we use ",(0,i.kt)("inlineCode",{parentName:"p"},"assert.ok")," method provided by Node.js."),(0,i.kt)("p",null,"Import ",(0,i.kt)("inlineCode",{parentName:"p"},"assert")," at the top of your file with something like"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const assert = require('assert');\n")),(0,i.kt)("p",null,"If an argument passed to ",(0,i.kt)("inlineCode",{parentName:"p"},"assert.ok()")," is false, an ",(0,i.kt)("inlineCode",{parentName:"p"},"AssertionError")," is thrown, and that error is logged to the console."),(0,i.kt)("h3",{id:"proper-setup-of-tests-in-mocha"},"Proper Setup of Tests in Mocha"),(0,i.kt)("p",null,"I'm going to include a quick caveat before this section: any code that works, will work (obviously). I will define best practice of how you should set up your tests for ",(0,i.kt)("em",{parentName:"p"},"consistent"),", ",(0,i.kt)("em",{parentName:"p"},"reliable"),", ",(0,i.kt)("em",{parentName:"p"},"readable")," and ",(0,i.kt)("em",{parentName:"p"},"maintainable")," code."),(0,i.kt)("p",null,"The set up of your tests should ideally follow into a pattern of three distinct phases:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Setup: where you create objects, variables, and set conditions that you will use to test"),(0,i.kt)("li",{parentName:"ol"},"Exercise: execute the functionality you are testing"),(0,i.kt)("li",{parentName:"ol"},"Verify: use ",(0,i.kt)("inlineCode",{parentName:"li"},"assert")," to check expectations against the result of the exercise (phase 2).")),(0,i.kt)("p",null,"Below is an ideal test using the aforementioned pattern:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"describe('.pop', () => {\n  it('returns the last element in the array [3phase]', () => {\n    // Setup\n    const knightString = 'knight';\n    const jediPath = ['padawan', knightString];\n\n    // Exercise\n    const popped = jediPath.pop();\n\n    // Verify\n    assert.ok(popped === knightString);\n  });\n});\n")),(0,i.kt)("p",null,"Remember that some of your tests may affect the results of others if you do not properly isolate them. In order to isolate your tests, a fourth stage may be necessary: Teardown. As it sounds, the Teardown phase is implemented to reset any conditions that were changed during the test before the next test runs."),(0,i.kt)("p",null,"When to use the fourth stage (not comprehensive):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"altering files and directory structure"),(0,i.kt)("li",{parentName:"ul"},"changing read/write permissions on a file"),(0,i.kt)("li",{parentName:"ul"},"editing records in a database")),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"You do not need to always use the fourth stage in the mentioned scenarios if no conditions exist that need to be reset.")),(0,i.kt)("p",null,"Here is a sample that is ideal for including this fourth stage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const assert = require('assert');\nconst fs = require('fs');\n\ndescribe('appendFileSync', () => {\n  it('writes a string to text file at given path name', () => {\n\n    // Setup\n    const path = './message.txt';\n    const str = 'Hello Node.js';\n\n    // Exercise: write to file\n    fs.appendFileSync(path, str);\n\n    // Verify: compare file contents to string\n    const contents = fs.readFileSync(path);\n    assert.ok(contents.toString() === str);\n\n    // Teardown: delete path\n        fs.unlinkSync(path);\n  });\n});\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"fs.unlinkSync(path)")," is used to make sure the ",(0,i.kt)("inlineCode",{parentName:"p"},"message.txt")," is deleted (it is written each time the test runs as a consequence of the ",(0,i.kt)("inlineCode",{parentName:"p"},"fs.appendFileSync")," function)."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"how-to-make-an-effective-test-suite-1"},"How to Make an Effective Test Suite"),(0,i.kt)("p",null,"Any change to your test suite should increase its value in at least one of these characteristics"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Fast")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Complete")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Reliable")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Isolated")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Maintainable")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Expressive (i.e. easy to read)"))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"how-to-test-in-javascript-spoiler-use-mocha-1"},"How to Test in JavaScript (spoiler: use Mocha)"),(0,i.kt)("p",null,"Required technologies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"JavaScript")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Node.js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Mocha")," test framework")),(0,i.kt)("h3",{id:"how-to-install-mocha-1"},"How to install Mocha:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ npm install mocha -D\n")),(0,i.kt)("h3",{id:"how-to-run-mocha-1"},"How to run Mocha:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"you can call it directly from ",(0,i.kt)("strong",{parentName:"li"},"node_modules"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ ./node_modules/mocha/bin/mocha\n")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"add a script to ",(0,i.kt)("strong",{parentName:"li"},"package.json"),". In the ",(0,i.kt)("inlineCode",{parentName:"li"},"scripts")," object, set the value of ",(0,i.kt)("inlineCode",{parentName:"li"},'"test"')," to ",(0,i.kt)("inlineCode",{parentName:"li"},"mocha"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"scripts": {\n  "test": "mocha"\n}\n')),(0,i.kt)("p",null,"Now you can call Mocha with the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"npm test\n")),(0,i.kt)("h3",{id:"describe-and-it-blocks-in-mocha-1"},(0,i.kt)("inlineCode",{parentName:"h3"},"describe")," and ",(0,i.kt)("inlineCode",{parentName:"h3"},"it")," blocks in Mocha"),(0,i.kt)("p",null,"In Mocha, tests are grouped using the ",(0,i.kt)("inlineCode",{parentName:"p"},"describe")," function and define tests using the ",(0,i.kt)("inlineCode",{parentName:"p"},"it")," function. Both functions accept two parameters: a descriptive string and a callback function."),(0,i.kt)("p",null,"Convention is the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"nest ",(0,i.kt)("inlineCode",{parentName:"li"},"describe")," blocks to resemble the structure of your implementation code and write individual tests in ",(0,i.kt)("inlineCode",{parentName:"li"},"it")," blocks")),(0,i.kt)("p",null,"For example, this is how you would test a ",(0,i.kt)("inlineCode",{parentName:"p"},"Math.max()")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"describe('Math', () => {\n  describe('.max', () => {\n    it('returns the argument with the highest value', () => {\n      // Your test goes here\n    });\n    it('returns -Infinity when no arguments are provided', () => {\n      // Your test goes here\n    });\n  });\n});\n")),(0,i.kt)("h3",{id:"assert-in-mocha-1"},(0,i.kt)("inlineCode",{parentName:"h3"},"assert")," in Mocha"),(0,i.kt)("p",null,"To write the actual tests, we use ",(0,i.kt)("inlineCode",{parentName:"p"},"assert.ok")," method provided by Node.js."),(0,i.kt)("p",null,"Import ",(0,i.kt)("inlineCode",{parentName:"p"},"assert")," at the top of your file with something like"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const assert = require('assert');\n")),(0,i.kt)("p",null,"If an argument passed to ",(0,i.kt)("inlineCode",{parentName:"p"},"assert.ok()")," is false, an ",(0,i.kt)("inlineCode",{parentName:"p"},"AssertionError")," is thrown, and that error is logged to the console."),(0,i.kt)("h3",{id:"proper-setup-of-tests-in-mocha-1"},"Proper Setup of Tests in Mocha"),(0,i.kt)("p",null,"I'm going to include a quick caveat before this section: any code that works, will work (obviously). I will define best practice of how you should set up your tests for ",(0,i.kt)("em",{parentName:"p"},"consistent"),", ",(0,i.kt)("em",{parentName:"p"},"reliable"),", ",(0,i.kt)("em",{parentName:"p"},"readable")," and ",(0,i.kt)("em",{parentName:"p"},"maintainable")," code."),(0,i.kt)("p",null,"The set up of your tests should ideally follow into a pattern of three distinct phases:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Setup: where you create objects, variables, and set conditions that you will use to test"),(0,i.kt)("li",{parentName:"ol"},"Exercise: execute the functionality you are testing"),(0,i.kt)("li",{parentName:"ol"},"Verify: use ",(0,i.kt)("inlineCode",{parentName:"li"},"assert")," to check expectations against the result of the exercise (phase 2).")),(0,i.kt)("p",null,"Below is an ideal test using the aforementioned pattern:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"describe('.pop', () => {\n  it('returns the last element in the array [3phase]', () => {\n    // Setup\n    const knightString = 'knight';\n    const jediPath = ['padawan', knightString];\n\n    // Exercise\n    const popped = jediPath.pop();\n\n    // Verify\n    assert.ok(popped === knightString);\n  });\n});\n")),(0,i.kt)("p",null,"Remember that some of your tests may affect the results of others if you do not properly isolate them. In order to isolate your tests, a fourth stage may be necessary: Teardown. As it sounds, the Teardown phase is implemented to reset any conditions that were changed during the test before the next test runs."),(0,i.kt)("p",null,"When to use the fourth stage (not comprehensive):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"altering files and directory structure"),(0,i.kt)("li",{parentName:"ul"},"changing read/write permissions on a file"),(0,i.kt)("li",{parentName:"ul"},"editing records in a database")),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"You do not need to always use the fourth stage in the mentioned scenarios if no conditions exist that need to be reset.")),(0,i.kt)("p",null,"Here is a sample that is ideal for including this fourth stage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const assert = require('assert');\nconst fs = require('fs');\n\ndescribe('appendFileSync', () => {\n  it('writes a string to text file at given path name', () => {\n\n    // Setup\n    const path = './message.txt';\n    const str = 'Hello Node.js';\n\n    // Exercise: write to file\n    fs.appendFileSync(path, str);\n\n    // Verify: compare file contents to string\n    const contents = fs.readFileSync(path);\n    assert.ok(contents.toString() === str);\n\n    // Teardown: delete path\n        fs.unlinkSync(path);\n  });\n});\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"fs.unlinkSync(path)")," is used to make sure the ",(0,i.kt)("inlineCode",{parentName:"p"},"message.txt")," is deleted (it is written each time the test runs as a consequence of the ",(0,i.kt)("inlineCode",{parentName:"p"},"fs.appendFileSync")," function)."),(0,i.kt)("p",null,"Caveat: using the fourth phase makes your code isolated, but ",(0,i.kt)("strong",{parentName:"p"},"not reliable"),". In order to make it reliable, use Mocha's hooks (code that is executed when a certain event happens). In Mocha, a hook is written within a ",(0,i.kt)("inlineCode",{parentName:"p"},"describe")," block."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"describe('example', () => {\n\n  afterEach(() => {\n    // teardown goes here\n  });\n\n  it('.sample', () => {\n    // test goes here\n  });\n});\n")),(0,i.kt)("p",null,"Other hooks in Mocha are ",(0,i.kt)("inlineCode",{parentName:"p"},"before()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"beforeEach()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"after()"),"."),(0,i.kt)("p",null,"For the completionists, here is the code from the fourth stage, done properly:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const assert = require('assert');\nconst fs = require('fs');\n\ndescribe('appendFileSync', () => {\n\n\n  const path = './message.txt';\n\n  afterEach(() => {\n    //Teardown here\n    fs.unlinkSync(path);\n  });\n\n  it('writes a string to text file at given path name', () => {\n\n    // Setup\n    const str = 'Hello Node.js';\n\n    // Exercise: write to file\n    fs.appendFileSync(path, str);\n\n    // Verify: compare file contents to string\n    const contents = fs.readileSync(path);\n    assert.ok(contents.toString() === str);\n\n\n\n  });\n});\n")),(0,i.kt)("p",null,".....",(0,i.kt)("em",{parentName:"p"},"This is a work in progress... Feel free to edit as you see fit!...")))}c.isMDXComponent=!0}}]);