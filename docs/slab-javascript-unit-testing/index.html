<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Dev @ DTI Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Dev @ DTI Blog Atom Feed"><title data-react-helmet="true">JavaScript Unit Testing | Dev @ DTI</title><meta data-react-helmet="true" property="og:url" content="https://dev.cornelldti.org/docs/slab-javascript-unit-testing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="JavaScript Unit Testing | Dev @ DTI"><meta data-react-helmet="true" name="description" content="Full disclosure: this document is based on the course &amp;quot;Learn JavaScript Unit Testing&amp;quot; at Codecademy.com"><meta data-react-helmet="true" property="og:description" content="Full disclosure: this document is based on the course &amp;quot;Learn JavaScript Unit Testing&amp;quot; at Codecademy.com"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://dev.cornelldti.org/docs/slab-javascript-unit-testing"><link data-react-helmet="true" rel="alternate" href="https://dev.cornelldti.org/docs/slab-javascript-unit-testing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dev.cornelldti.org/docs/slab-javascript-unit-testing" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.60cb7273.css">
<link rel="preload" href="/assets/js/runtime~main.87a76d1c.js" as="script">
<link rel="preload" href="/assets/js/main.90698c6a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Cornell DTI Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Cornell DTI Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Dev @ DTI</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started-introduction">Docs</a><a class="navbar__item navbar__link" href="/dev-survey-sp2020">Developer Survey</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cornell-dti/dev.cornelldti.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Cornell DTI Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Cornell DTI Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Dev @ DTI</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/getting-started-introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/dev-survey-sp2020">Developer Survey</a></li><li class="menu__list-item"><a href="https://github.com/cornell-dti/dev.cornelldti.org" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started-introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started-contributing">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">New Developer Onboarding</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/onboarding-join-github-organization">Join our GitHub Organization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/onboarding-dev-workflow">Development Workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/onboarding-editor">Text Editor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/onboarding-git">Using Git</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-code-quality">Code Quality</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-devops">DevOps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-code-review">Code Review</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resource-timeline-sp22">Timeline SP22</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resource-development-guidelines">Development Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resource-common-docs-pointer">Commonly Used Docs Pointer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resource-devsesh">Past DevSesh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resource-1-1">TPM-Dev 1:1 Topics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Grading</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/grading-dev-tpm-rubric">Dev &amp; TPM Grading Rubric</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/grading-dev-tpm-portfolios">TPM &amp; Development Portfolio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/grading-dev-1-credit-rubric">Dev 1 Credit Rubric</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Assignments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-common-requirements">Common Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-pull-request-discussion">Pull Request Discussion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-unit-testing">Unit Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-documentation">Source Code Contributor Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-semester-plan">Semester Plan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-semester-reflection">Semester Reflection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-design-doc">Design Doc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-learning-doc">Learning Doc (Learning Goals + Learning Progress)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-tech-critique-security-doc">Technical Critique / Security Vulnerability</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Assignment Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/assignments-examples-cp-requirements-algo">CoursePlan Requirement Checking Design Document</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Slab Archive</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/slab-index">Slab Archive Index</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/slab-javascript-unit-testing">JavaScript Unit Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/slab-large-tasks">How to Break Down Large Tasks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/slab-postmortem-template">Postmortem Template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/slab-repo-automations">Automations for DTI Repositories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/slab-tpm-onboarding">New TPM Onboarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/slab-tpm-vs-pm">PM vs. TPM Guide for Team Members</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">JavaScript Unit Testing</h1></header><div class="markdown"><p><em>Full disclosure: this document is based on the course &quot;</em><a href="https://www.codecademy.com/learn/learn-javascript-unit-testing" target="_blank" rel="noopener noreferrer"><em>Learn JavaScript Unit Testing</em></a><em>&quot; at</em> <a href="https://codecademy.com" target="_blank" rel="noopener noreferrer"><em>Codecademy.com</em></a></p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="why-test"></a>Why Test?<a class="hash-link" href="#why-test" title="Direct link to heading">#</a></h2><p>When writing your app using JavaScript, it is often easier and more convenient to assume that the lines of code you just wrote are correct. After all, you wrote them. Unfortunately, we are human and we err. Let&#x27;s catch these faux paus before they affect your teammates&#x27; work. Enter, unit tests.</p><p>For the uninitiated, unit tests (and automated tests in general) are better than manual testing because it is:</p><ul><li>faster</li><li>more reliable</li><li>maintainable</li></ul><p>A typical workflow should consist of something like the following:</p><ol><li>Write code <strong>and</strong> corresponding tests</li><li>Enter a command into a terminal to run tests</li><li>If all the tests pass, Congratulations! Otherwise, go back to step 1 and review your code</li></ol><p>Tests as documentation provide what many other forms cannot: both human-readable text to describe the application and machine-executable code to confirm the app works as described.</p><p>Quick test, see if you can understand what is going on with the following code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">it(&#x27;accepts the customer name&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">  const name = &#x27;Hungry Person&#x27;;</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  browser.url(&#x27;/&#x27;);</span></div><div class="token-line"><span class="token plain">  browser.setValue(&#x27;#name&#x27;, name);</span></div><div class="token-line"><span class="token plain">  browser.click(&#x27;#submit-order&#x27;);</span></div><div class="token-line"><span class="token plain">  browser.url(&#x27;/&#x27;);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  assert.include(browser.getText(&#x27;#deliver-to&#x27;), name);</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Answer: <code>it accepts the customer name</code></p><p>If you&#x27;re still reading, great. You know and understand the importance of testing <em>while developing</em>.</p><p>Your test code should live in close proximity to your development code, and it should be easy to recognize which tests correspond to what development code. i.e. <code>index.js</code> and <code>index-test.js</code>.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-make-an-effective-test-suite"></a>How to Make an Effective Test Suite<a class="hash-link" href="#how-to-make-an-effective-test-suite" title="Direct link to heading">#</a></h2><p>Any change to your test suite should increase its value in at least one of these characteristics</p><ul><li><em>Fast</em></li><li><em>Complete</em></li><li><em>Reliable</em></li><li><em>Isolated</em></li><li><em>Maintainable</em></li><li><em>Expressive (i.e. easy to read)</em></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-test-in-javascript-spoiler-use-mocha"></a>How to Test in JavaScript (spoiler: use Mocha)<a class="hash-link" href="#how-to-test-in-javascript-spoiler-use-mocha" title="Direct link to heading">#</a></h2><p>Required technologies:</p><ul><li><code>JavaScript</code></li><li><code>Node.js</code></li><li><code>Mocha</code> test framework</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-install-mocha"></a>How to install Mocha:<a class="hash-link" href="#how-to-install-mocha" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">$ npm install mocha -D</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-run-mocha"></a>How to run Mocha:<a class="hash-link" href="#how-to-run-mocha" title="Direct link to heading">#</a></h3><ol><li>you can call it directly from <strong>node_modules</strong></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">$ ./node_modules/mocha/bin/mocha</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>add a script to <strong>package.json</strong>. In the <code>scripts</code> object, set the value of <code>&quot;test&quot;</code> to <code>mocha</code>.</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">&quot;scripts&quot;: {</span></div><div class="token-line"><span class="token plain">  &quot;test&quot;: &quot;mocha&quot;</span></div><div class="token-line"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now you can call Mocha with the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">npm test</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="describe-and-it-blocks-in-mocha"></a><code>describe</code> and <code>it</code> blocks in Mocha<a class="hash-link" href="#describe-and-it-blocks-in-mocha" title="Direct link to heading">#</a></h3><p>In Mocha, tests are grouped using the <code>describe</code> function and define tests using the <code>it</code> function. Both functions accept two parameters: a descriptive string and a callback function.</p><p>Convention is the following:</p><ul><li>nest <code>describe</code> blocks to resemble the structure of your implementation code and write individual tests in <code>it</code> blocks</li></ul><p>For example, this is how you would test a <code>Math.max()</code> function:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">describe(&#x27;Math&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">  describe(&#x27;.max&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">    it(&#x27;returns the argument with the highest value&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">      // Your test goes here</span></div><div class="token-line"><span class="token plain">    });</span></div><div class="token-line"><span class="token plain">    it(&#x27;returns -Infinity when no arguments are provided&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">      // Your test goes here</span></div><div class="token-line"><span class="token plain">    });</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="assert-in-mocha"></a><code>assert</code> in Mocha<a class="hash-link" href="#assert-in-mocha" title="Direct link to heading">#</a></h3><p>To write the actual tests, we use <code>assert.ok</code> method provided by Node.js.</p><p>Import <code>assert</code> at the top of your file with something like</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">const assert = require(&#x27;assert&#x27;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If an argument passed to <code>assert.ok()</code> is false, an <code>AssertionError</code> is thrown, and that error is logged to the console.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="proper-setup-of-tests-in-mocha"></a>Proper Setup of Tests in Mocha<a class="hash-link" href="#proper-setup-of-tests-in-mocha" title="Direct link to heading">#</a></h3><p>I&#x27;m going to include a quick caveat before this section: any code that works, will work (obviously). I will define best practice of how you should set up your tests for <em>consistent</em>, <em>reliable</em>, <em>readable</em> and <em>maintainable</em> code.</p><p>The set up of your tests should ideally follow into a pattern of three distinct phases:</p><ol><li>Setup: where you create objects, variables, and set conditions that you will use to test</li><li>Exercise: execute the functionality you are testing</li><li>Verify: use <code>assert</code> to check expectations against the result of the exercise (phase 2).</li></ol><p>Below is an ideal test using the aforementioned pattern:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">describe(&#x27;.pop&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">  it(&#x27;returns the last element in the array [3phase]&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">    // Setup</span></div><div class="token-line"><span class="token plain">    const knightString = &#x27;knight&#x27;;</span></div><div class="token-line"><span class="token plain">    const jediPath = [&#x27;padawan&#x27;, knightString];</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Exercise</span></div><div class="token-line"><span class="token plain">    const popped = jediPath.pop();</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Verify</span></div><div class="token-line"><span class="token plain">    assert.ok(popped === knightString);</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Remember that some of your tests may affect the results of others if you do not properly isolate them. In order to isolate your tests, a fourth stage may be necessary: Teardown. As it sounds, the Teardown phase is implemented to reset any conditions that were changed during the test before the next test runs.</p><p>When to use the fourth stage (not comprehensive):</p><ul><li>altering files and directory structure</li><li>changing read/write permissions on a file</li><li>editing records in a database</li></ul><p><em>You do not need to always use the fourth stage in the mentioned scenarios if no conditions exist that need to be reset.</em></p><p>Here is a sample that is ideal for including this fourth stage:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">const assert = require(&#x27;assert&#x27;);</span></div><div class="token-line"><span class="token plain">const fs = require(&#x27;fs&#x27;);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">describe(&#x27;appendFileSync&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">  it(&#x27;writes a string to text file at given path name&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Setup</span></div><div class="token-line"><span class="token plain">    const path = &#x27;./message.txt&#x27;;</span></div><div class="token-line"><span class="token plain">    const str = &#x27;Hello Node.js&#x27;;</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Exercise: write to file</span></div><div class="token-line"><span class="token plain">    fs.appendFileSync(path, str);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Verify: compare file contents to string</span></div><div class="token-line"><span class="token plain">    const contents = fs.readFileSync(path);</span></div><div class="token-line"><span class="token plain">    assert.ok(contents.toString() === str);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Teardown: delete path</span></div><div class="token-line"><span class="token plain">        fs.unlinkSync(path);</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The <code>fs.unlinkSync(path)</code> is used to make sure the <code>message.txt</code> is deleted (it is written each time the test runs as a consequence of the <code>fs.appendFileSync</code> function).</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-make-an-effective-test-suite-1"></a>How to Make an Effective Test Suite<a class="hash-link" href="#how-to-make-an-effective-test-suite-1" title="Direct link to heading">#</a></h2><p>Any change to your test suite should increase its value in at least one of these characteristics</p><ul><li><em>Fast</em></li><li><em>Complete</em></li><li><em>Reliable</em></li><li><em>Isolated</em></li><li><em>Maintainable</em></li><li><em>Expressive (i.e. easy to read)</em></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-test-in-javascript-spoiler-use-mocha-1"></a>How to Test in JavaScript (spoiler: use Mocha)<a class="hash-link" href="#how-to-test-in-javascript-spoiler-use-mocha-1" title="Direct link to heading">#</a></h2><p>Required technologies:</p><ul><li><code>JavaScript</code></li><li><code>Node.js</code></li><li><code>Mocha</code> test framework</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-install-mocha-1"></a>How to install Mocha:<a class="hash-link" href="#how-to-install-mocha-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">$ npm install mocha -D</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-run-mocha-1"></a>How to run Mocha:<a class="hash-link" href="#how-to-run-mocha-1" title="Direct link to heading">#</a></h3><ol><li>you can call it directly from <strong>node_modules</strong></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">$ ./node_modules/mocha/bin/mocha</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>add a script to <strong>package.json</strong>. In the <code>scripts</code> object, set the value of <code>&quot;test&quot;</code> to <code>mocha</code>.</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">&quot;scripts&quot;: {</span></div><div class="token-line"><span class="token plain">  &quot;test&quot;: &quot;mocha&quot;</span></div><div class="token-line"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now you can call Mocha with the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">npm test</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="describe-and-it-blocks-in-mocha-1"></a><code>describe</code> and <code>it</code> blocks in Mocha<a class="hash-link" href="#describe-and-it-blocks-in-mocha-1" title="Direct link to heading">#</a></h3><p>In Mocha, tests are grouped using the <code>describe</code> function and define tests using the <code>it</code> function. Both functions accept two parameters: a descriptive string and a callback function.</p><p>Convention is the following:</p><ul><li>nest <code>describe</code> blocks to resemble the structure of your implementation code and write individual tests in <code>it</code> blocks</li></ul><p>For example, this is how you would test a <code>Math.max()</code> function:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">describe(&#x27;Math&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">  describe(&#x27;.max&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">    it(&#x27;returns the argument with the highest value&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">      // Your test goes here</span></div><div class="token-line"><span class="token plain">    });</span></div><div class="token-line"><span class="token plain">    it(&#x27;returns -Infinity when no arguments are provided&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">      // Your test goes here</span></div><div class="token-line"><span class="token plain">    });</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="assert-in-mocha-1"></a><code>assert</code> in Mocha<a class="hash-link" href="#assert-in-mocha-1" title="Direct link to heading">#</a></h3><p>To write the actual tests, we use <code>assert.ok</code> method provided by Node.js.</p><p>Import <code>assert</code> at the top of your file with something like</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">const assert = require(&#x27;assert&#x27;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If an argument passed to <code>assert.ok()</code> is false, an <code>AssertionError</code> is thrown, and that error is logged to the console.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="proper-setup-of-tests-in-mocha-1"></a>Proper Setup of Tests in Mocha<a class="hash-link" href="#proper-setup-of-tests-in-mocha-1" title="Direct link to heading">#</a></h3><p>I&#x27;m going to include a quick caveat before this section: any code that works, will work (obviously). I will define best practice of how you should set up your tests for <em>consistent</em>, <em>reliable</em>, <em>readable</em> and <em>maintainable</em> code.</p><p>The set up of your tests should ideally follow into a pattern of three distinct phases:</p><ol><li>Setup: where you create objects, variables, and set conditions that you will use to test</li><li>Exercise: execute the functionality you are testing</li><li>Verify: use <code>assert</code> to check expectations against the result of the exercise (phase 2).</li></ol><p>Below is an ideal test using the aforementioned pattern:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">describe(&#x27;.pop&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">  it(&#x27;returns the last element in the array [3phase]&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">    // Setup</span></div><div class="token-line"><span class="token plain">    const knightString = &#x27;knight&#x27;;</span></div><div class="token-line"><span class="token plain">    const jediPath = [&#x27;padawan&#x27;, knightString];</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Exercise</span></div><div class="token-line"><span class="token plain">    const popped = jediPath.pop();</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Verify</span></div><div class="token-line"><span class="token plain">    assert.ok(popped === knightString);</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Remember that some of your tests may affect the results of others if you do not properly isolate them. In order to isolate your tests, a fourth stage may be necessary: Teardown. As it sounds, the Teardown phase is implemented to reset any conditions that were changed during the test before the next test runs.</p><p>When to use the fourth stage (not comprehensive):</p><ul><li>altering files and directory structure</li><li>changing read/write permissions on a file</li><li>editing records in a database</li></ul><p><em>You do not need to always use the fourth stage in the mentioned scenarios if no conditions exist that need to be reset.</em></p><p>Here is a sample that is ideal for including this fourth stage:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">const assert = require(&#x27;assert&#x27;);</span></div><div class="token-line"><span class="token plain">const fs = require(&#x27;fs&#x27;);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">describe(&#x27;appendFileSync&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">  it(&#x27;writes a string to text file at given path name&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Setup</span></div><div class="token-line"><span class="token plain">    const path = &#x27;./message.txt&#x27;;</span></div><div class="token-line"><span class="token plain">    const str = &#x27;Hello Node.js&#x27;;</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Exercise: write to file</span></div><div class="token-line"><span class="token plain">    fs.appendFileSync(path, str);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Verify: compare file contents to string</span></div><div class="token-line"><span class="token plain">    const contents = fs.readFileSync(path);</span></div><div class="token-line"><span class="token plain">    assert.ok(contents.toString() === str);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Teardown: delete path</span></div><div class="token-line"><span class="token plain">        fs.unlinkSync(path);</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The <code>fs.unlinkSync(path)</code> is used to make sure the <code>message.txt</code> is deleted (it is written each time the test runs as a consequence of the <code>fs.appendFileSync</code> function).</p><p>Caveat: using the fourth phase makes your code isolated, but <strong>not reliable</strong>. In order to make it reliable, use Mocha&#x27;s hooks (code that is executed when a certain event happens). In Mocha, a hook is written within a <code>describe</code> block.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">describe(&#x27;example&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  afterEach(() =&gt; {</span></div><div class="token-line"><span class="token plain">    // teardown goes here</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  it(&#x27;.sample&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain">    // test goes here</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Other hooks in Mocha are <code>before()</code>, <code>beforeEach()</code>, <code>after()</code>.</p><p>For the completionists, here is the code from the fourth stage, done properly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#fafafa"><div class="token-line"><span class="token plain">const assert = require(&#x27;assert&#x27;);</span></div><div class="token-line"><span class="token plain">const fs = require(&#x27;fs&#x27;);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">describe(&#x27;appendFileSync&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  const path = &#x27;./message.txt&#x27;;</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  afterEach(() =&gt; {</span></div><div class="token-line"><span class="token plain">    //Teardown here</span></div><div class="token-line"><span class="token plain">    fs.unlinkSync(path);</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  it(&#x27;writes a string to text file at given path name&#x27;, () =&gt; {</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Setup</span></div><div class="token-line"><span class="token plain">    const str = &#x27;Hello Node.js&#x27;;</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Exercise: write to file</span></div><div class="token-line"><span class="token plain">    fs.appendFileSync(path, str);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    // Verify: compare file contents to string</span></div><div class="token-line"><span class="token plain">    const contents = fs.readileSync(path);</span></div><div class="token-line"><span class="token plain">    assert.ok(contents.toString() === str);</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  });</span></div><div class="token-line"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>.....<em>This is a work in progress... Feel free to edit as you see fit!...</em></p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/slab-index"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Slab Archive Index</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/slab-large-tasks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to Break Down Large Tasks Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-test" class="table-of-contents__link">Why Test?</a></li><li><a href="#how-to-make-an-effective-test-suite" class="table-of-contents__link">How to Make an Effective Test Suite</a></li><li><a href="#how-to-test-in-javascript-spoiler-use-mocha" class="table-of-contents__link">How to Test in JavaScript (spoiler: use Mocha)</a><ul><li><a href="#how-to-install-mocha" class="table-of-contents__link">How to install Mocha:</a></li><li><a href="#how-to-run-mocha" class="table-of-contents__link">How to run Mocha:</a></li><li><a href="#describe-and-it-blocks-in-mocha" class="table-of-contents__link"><code>describe</code> and <code>it</code> blocks in Mocha</a></li><li><a href="#assert-in-mocha" class="table-of-contents__link"><code>assert</code> in Mocha</a></li><li><a href="#proper-setup-of-tests-in-mocha" class="table-of-contents__link">Proper Setup of Tests in Mocha</a></li></ul></li><li><a href="#how-to-make-an-effective-test-suite-1" class="table-of-contents__link">How to Make an Effective Test Suite</a></li><li><a href="#how-to-test-in-javascript-spoiler-use-mocha-1" class="table-of-contents__link">How to Test in JavaScript (spoiler: use Mocha)</a><ul><li><a href="#how-to-install-mocha-1" class="table-of-contents__link">How to install Mocha:</a></li><li><a href="#how-to-run-mocha-1" class="table-of-contents__link">How to run Mocha:</a></li><li><a href="#describe-and-it-blocks-in-mocha-1" class="table-of-contents__link"><code>describe</code> and <code>it</code> blocks in Mocha</a></li><li><a href="#assert-in-mocha-1" class="table-of-contents__link"><code>assert</code> in Mocha</a></li><li><a href="#proper-setup-of-tests-in-mocha-1" class="table-of-contents__link">Proper Setup of Tests in Mocha</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started-introduction">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/onboarding-dev-workflow">Onboarding</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/guide-code-quality">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/resource-common-docs-pointer">Resources</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Cornell DTI</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.cornelldti.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li><li class="footer__item"><a href="https://github.com/cornell-dti" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://www.facebook.com/cornelldti/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://medium.com/cornell-design-tech-initiative/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Cornell DTI Products</h4><ul class="footer__items"><li class="footer__item"><a href="https://courseplan.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Course Plan</a></li><li class="footer__item"><a href="https://www.cureviews.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CU Reviews</a></li><li class="footer__item"><a href="https://www.cornelldti.org/Projects/events" target="_blank" rel="noopener noreferrer" class="footer__link-item">eve</a></li><li class="footer__item"><a href="https://www.cornelldti.org/Projects/flux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flux</a></li><li class="footer__item"><a href="https://www.cornelldti.org/Projects/orientation" target="_blank" rel="noopener noreferrer" class="footer__link-item">O-Week</a></li><li class="footer__item"><a href="https://queueme.in/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Queue Me In</a></li><li class="footer__item"><a href="https://www.research-connect.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Research Connect</a></li><li class="footer__item"><a href="https://samwise.today" target="_blank" rel="noopener noreferrer" class="footer__link-item">Samwise</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/dti-text-logo.png" alt="Cornell DTI Text Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/dti-text-logo.png" alt="Cornell DTI Text Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 2020 Cornell Design & Tech Initiative. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.87a76d1c.js"></script>
<script src="/assets/js/main.90698c6a.js"></script>
</body>
</html>